<!DOCTYPE HTML>
<head>
<meta charset="utf-8">
<meta name="robots" content="noindex,nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--<script src="code.js"></script>-->
<script>
var endpoint = "https://alpha1beta.blog/wp-json/";
function html_entity_decode( rawStr ) {
  return rawStr.replace(/&#(\d+);/g, ((match, dec) => `${String.fromCharCode(dec)}`));
}

document.addEventListener('DOMContentLoaded', function() {


if( window.fetch ){
    fetch( endpoint )
		.then( ( response ) => response.json() )
		//.then( ( data ) => console.log( data ) )
		//.then( data => { return data })
		.then( 
		( data ) => 
		document.title = html_entity_decode( data.name ) 
		//document.getElementsByTagName('head')[0].appendChild('<meta property="og:title" content="'+ data.name + '"/>';
		)
		.catch((e) => console.error(`Critical failure: ${e.message}`));

	fetch( endpoint + 'wp/v2/posts')
		.then( ( response ) => response.json() )
		.then( (data) => data.forEach( (post) => {
				console.log(post);
				if( post.status == "publish"){
				var tmp_post = '<article">';
				tmp_post += '<h2 class="post-title"><a href="'+ post.link +'">' + post.title.rendered + '</a></h2>';
				tmp_post += '<p>';
				tmp_post += post.excerpt.rendered;
				tmp_post += '</p>';
				tmp_post += '</article">';
				document.body.innerHTML += tmp_post;
				}
			})
			/*
			data.forEach( post =>
			document.body.innerHTML += post.title
			)
			*/
		);
		
	}
});
</script>
<title></title>
</head>
<body>
</body>
</html>